<%= render  :partial =>  "/layouts/top" %>

<style>
  .left-content {
    float: left;
    width:64%;
  }

  .right-content {
    float: right;
    width:34%;
  }

  .main-content {
    width: 98%;
  }

  .menu-buttons {
    padding: 10px;                                                              
    float: right;                                                               
    width: 30%;                                                                 
    margin-right: 10px;                                                         
    border-style: solid;                                                        
    border-width: 0px 0px 0px 1px;                                              
  }                                                                             
                                                                                
  .menu-buttons a {                                                             
    width: 95%;                                                                 
  }                                                                             
                                                                                
  .buttons {                                                                    
    background-color: grey;                                                     
    border-bottom: 1px outset #EEEEEE;                                          
    border-style: outset;                                                       
    border-top: 1px outset #EEEEEE;                                             
    color: white;                                                               
    display: block;                                                             
    padding: 10px;                                                              
    text-align: center;                                                         
    text-decoration: none;                                                      
                                                                                
                                                                                
    background-color: rgb(0, 116, 204);                                         
    background-image: -moz-linear-gradient(center top , rgb(0, 136, 204), rgb(0, 85, 204));
    background-repeat: repeat-x;                                                
    border-bottom-color: rgba(0, 0, 0, 0.25);                                   
    border-left-color-ltr-source: physical;                                     
    border-left-color-rtl-source: physical;                                     
    border-left-color-value: rgba(0, 0, 0, 0.1);                                
    border-right-color-ltr-source: physical;                                    
    border-right-color-rtl-source: physical;                                    
    border-right-color-value: rgba(0, 0, 0, 0.1);                               
    border-top-color: rgba(0, 0, 0, 0.1);                                       
                                                                                
    font-size: 1.3em;                                                           
  }

   .div-products {                                                           
      width: 98%;                                                             
      overflow: auto;                                                         
      border-width: 1px 0px 0px 0px;                                          
      border-style: solid;                                                    
    }
</style>

<div class="main-content">

<div class="left-content">
<table style="width:100%;">
  <tr>
    <th colspan="3" style="text-align: left;">Supplier Details</th>
  </tr>
  <tr>
    <th colspan="3" style="text-align: left;">&nbsp;</th>
  </tr>
  <tr>
    <td style="text-align: left; width: 20%;">Supplier Name:</td><td>&nbsp;</td>
    <td><%= EpicsSupplier.find(session[:stock][:supplier_id]).name rescue "Supplier Not Known"   %></td>
  </tr>
  <tr>
    <td style="text-align: left; width: 20%;">Batch Number:</td>
    <td>&nbsp;</td>
    <td><%= session[:stock][:grn_number] %></td>
  </tr>
  <tr>
    <td style="text-align: left; width: 20%;">Delivered Date:</td>
    <td>&nbsp;</td>
    <td><%= session[:stock][:grn_date].to_date.strftime("%d %B %Y")   %></td>
  </tr>
</table>

<br />
<br />
<br />

<div class="div-products">

<table style="width:100%;">
  <tr>
    <th colspan ="4" style="text-align: left;">
      Stock Details
    </th>
  </tr>
  <tr>
    <th colspan ="4" style="text-align: left;">
      &nbsp;
    </th>
  </tr>
  <tr>
    <th style="text-align: left; width: 10%;">Item Name</th>
    <th style="text-align: left; width: 10%;">Item Code</th>
    <th style="text-align: left; width: 10%;">Item Quantity</th>
    <th style="text-align: left; width: 10%;">Expiry Date</th>
  </tr>
  <% for item in @cart.items %>
  <tr>
    <td><%=  item.name %></td>
    <td><%=  item.product.product_code rescue "Code not found"  %></td>
    <td><%=  item.quantity %></td>
    <td><%=  item.expiry_date.to_date.strftime("%d - %b - %Y") rescue "Does not expire" %></td>
  </tr>
  <% end %>
 </table>

</div>

</div>


<div class="right-content">

  <table style="width: 100%;">
    <tr style="line-height: 50px;">
      <td><%= link_to "Add item", '/stock_details/new', :class => 'buttons' %></td>
    </tr>

    <tr style="line-height: 50px;">
      <td><%= link_to "Save", '/stock_details/checkout', :class => 'buttons' %></td>
    </tr>

  </table>

 </div>  


 </div>  
